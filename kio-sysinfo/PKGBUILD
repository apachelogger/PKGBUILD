# Maintainer: garion < garion @ mailoo.org >

# The old maintainer is Kido.
# The file "background_arch.png" comes from
# djclue917's old package of kio-sysinfo.

pkgname=kio-sysinfo
pkgver=0
pkgrel=1
pkgdesc="KDE IO Slave, sysinfo:/, to display system infomation in konqueror"
arch=('i686' 'x86_64')
url="http://github.com/blue-shell/kio-sysinfo"
license=('GPL')
depends=('kdelibs')
makedepends=('cmake' 'automoc4' 'git')
source=('git+https://github.com/blue-shell/kio-sysinfo.git')
md5sums=('SKIP')

prepare() {
  cd $srcdir
  mkdir build
}

pkgver() {
  cd $srcdir/$pkgname
  printf "0+git`date +%Y%m%d`.%s" "$(git rev-parse --short HEAD)"
}

build() {
  cd $srcdir/build
  cmake ../${pkgname} \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DKDE4_BUILD_TESTS=OFF
  make
}


package(){
  cd build
  make DESTDIR="${pkgdir}" install || return 1
}

